#!/usr/bin/env python3
"""
Manual mapping of Ukrainian settlement names to coordinates.
This provides a fallback for locations that geocoding services struggle with,
particularly small villages and settlements with non-standard spelling.

Coordinates are in (latitude, longitude) format.
"""

# Manual mapping of settlement names to coordinates
# Key: settlement name (lowercase, without prefixes like с., село, смт)
# Value: (lat, lng) tuple

settlements = [
   kirovogradska_obl = {
        "новгородка": (48.2347, 32.4342),
        "новоукраїнка": (48.3100, 32.2381),
        "олександрія": (48.6692, 33.1097),
        "знам'янка": (48.7119, 32.6714),
        "світловодськ": (49.0500, 33.2333),
        "гайворон": (48.3392, 29.8722),
        "голованівськ": (48.2458, 30.6036),
        "долинська": (48.1125, 32.7667),
        "мала виска": (48.6533, 31.6294),
        "помічна": (48.2322, 32.1631),
        "добровеличківка": (48.3833, 31.1750),
        "устинівка": (48.4500, 33.0500),
        "вільшанка": (48.3500, 30.9333),
        "бобринець": (48.0597, 32.1628),
        "компаніївка": (48.2667, 32.2167),
        "петрове": (48.4167, 31.6000),
        "благовіщенське": (48.5667, 31.5167),
        "нововитебське": (48.3833, 32.3833),
    },
]

UKRAINE_SETTLEMENTS = [
    # === Кіровоградська область ===
    {
        
    },
    
    # === Черкаська область ===
    {
    "черкаси": (49.4444, 32.0598),
    "умань": (48.7477, 30.2177),
    "сміла": (49.2167, 31.8667),
    "золотоноша": (49.6858, 32.0500),
    "канів": (49.7489, 31.4611),
    "ватутіне": (49.0167, 31.0667),
    "кам'янка": (49.0333, 32.0833),
    "корсунь-шевченківський": (49.4203, 31.2506),
    "монастирище": (49.0886, 29.8044),
    "тальне": (48.8833, 30.6667),
    "городище": (49.2833, 31.4667),
    "жашків": (49.2333, 30.1000),
    "христинівка": (48.8167, 29.9667),
    "звенигородка": (49.0833, 30.9667),
    "катеринопіль": (49.0500, 31.3833),
    "лисянка": (49.2500, 30.8333),
    "маньківка": (48.9667, 30.3167),
    "драбів": (49.9667, 32.1333),
    "чигирин": (49.0833, 32.6500),
    "чорнобай": (49.6833, 32.4500),
    "шпола": (48.9500, 31.4000),
    "буки": (49.1000, 29.8833),
    "єрки": (49.2000, 30.8333),
    },
    
    {
    # === Полтавська область ===
    "полтава": (49.5886, 34.5517),
    "кременчук": (49.0783, 33.4242),
    "горішні плавні": (49.0103, 33.6325),
    "лубни": (50.0167, 32.9833),
    "миргород": (49.9667, 33.6167),
    "гадяч": (50.3667, 34.0167),
    "карлівка": (49.4500, 35.1333),
    "хорол": (49.7833, 33.8000),
    "пирятин": (50.2333, 32.5167),
    "лохвиця": (50.3667, 33.2667),
    "котельва": (50.0667, 34.7500),
    "зіньків": (50.2000, 34.3667),
    "великі сорочинці": (50.0167, 33.8167),
    "решетилівка": (49.5667, 34.0833),
    "диканька": (49.8167, 34.5000),
    "опішня": (49.9667, 34.6167),
    "козельщина": (49.3167, 33.8833),
    "нові санжари": (49.3333, 34.3167),
    "машівка": (49.3833, 34.6833),
    "чутове": (49.6833, 35.1667),
    "глобине": (49.3833, 33.2667),
    "семенівка": (49.5667, 34.5500),
    "велика багачка": (49.8000, 33.3833),
    "оржиця": (49.9500, 32.6667),
    "чорнухи": (50.0500, 32.9167),
    "кобеляки": (49.1500, 34.2000),
    },
    
    # === Миколаївська область ===
    {
    "миколаїв": (46.9750, 31.9946),
    "первомайськ": (48.0436, 30.8531),
    "южноукраїнськ": (47.8208, 31.1747),
    "вознесенськ": (47.5489, 31.3308),
    "очаків": (46.6167, 31.5500),
    "снігурівка": (47.0667, 32.8000),
    "новий буг": (47.6833, 32.5167),
    "арбузинка": (47.9167, 31.3500),
    "баштанка": (47.4000, 32.4167),
    "березнегувате": (47.3333, 32.0833),
    "братське": (47.8000, 32.8500),
    "веселинове": (47.5667, 31.6167),
    "доманівка": (47.5167, 32.0500),
    "єланець": (47.7500, 31.7333),
    "казанка": (47.6333, 32.8833),
    "кривоозерка": (48.0833, 31.0833),
    "новоодеський район": (47.2667, 31.7667),
    "вітовка": (46.8833, 32.1333),
    },
    
    # === Херсонська область ===
    {
    "херсон": (46.6354, 32.6169),
    "каховка": (46.8167, 33.4833),
    "нова каховка": (46.7581, 33.3478),
    "генічеськ": (46.1747, 34.8008),
    "скадовськ": (46.1167, 32.9167),
    "берислав": (46.8333, 33.4167),
    "чаплинка": (46.3667, 33.5500),
    "голопристанський район": (46.5167, 32.6500),
    "голопристанськ": (46.5167, 32.6500),
    "цюрупинськ": (46.6167, 32.7333),
    "нововоронцовка": (47.0167, 33.3833),
    "великолепетиха": (47.0500, 33.8000),
    "горностаївка": (46.9333, 33.6667),
    "іванівка": (46.8333, 32.9167),
    "великоолександрівка": (47.3000, 33.2667),
    
    # === Одеська область ===
    "одеса": (46.4825, 30.7233),
    "ізмаїл": (45.3492, 28.8381),
    "білгород-дністровський": (46.1914, 30.3456),
    "чорноморськ": (46.3019, 30.6556),
    "южне": (46.6231, 31.1014),
    "роздільна": (46.8500, 30.0833),
    "подільськ": (47.7500, 29.5333),
    "балта": (47.9333, 29.6167),
    "кодима": (48.0833, 29.1000),
    "савран": (48.1333, 30.0500),
    "любашівка": (47.8500, 29.9333),
    "березівка": (47.2000, 30.9167),
    "ананьїв": (47.7000, 29.9500),
    "арциз": (45.9833, 29.4333),
    "болград": (45.6833, 28.6167),
    "біляївка": (46.4167, 30.2833),
    "кілія": (45.4500, 29.2667),
    "овідіополь": (46.2500, 30.4333),
    "татарбунари": (45.7667, 29.6000),
    "теплодар": (46.5000, 30.3333),
    "вилкове": (45.4167, 29.5833),
    "фонтанка": (46.3833, 30.6667),
    "великомихайлівка": (47.6000, 30.1667),
    },
    
    # === Вінницька область ===
    {
    "вінниця": (49.2331, 28.4682),
    "жмеринка": (49.0375, 28.1139),
    "козятин": (49.7167, 28.8333),
    "хмільник": (49.5500, 27.9500),
    "могилів-подільський": (48.4500, 27.8000),
    "ладижин": (48.6833, 29.2333),
    "гайсин": (48.8119, 29.3842),
    "тульчин": (48.6750, 28.8547),
    "калинівка": (49.4500, 28.5167),
    "немирів": (48.9833, 28.8500),
    "бар": (49.0667, 27.6833),
    "погребище": (49.4833, 29.2667),
    "шаргород": (48.7500, 28.0833),
    "липовець": (49.2333, 29.0667),
    "іллінці": (49.1000, 29.2000),
    "теплик": (48.6500, 29.7333),
    "муровані курилівці": (48.7333, 27.5333),
    "оратів": (49.2167, 29.5500),
    "томашпіль": (48.5333, 28.5167),
    "тростянець": (48.4833, 29.2333),
    "чечельник": (48.2167, 29.3667),
    "піщанка": (48.4167, 28.8833),
    },
    
    # === Дніпропетровська область ===
    {
    "дніпро": (48.4647, 35.0462),
    "кривий ріг": (47.9086, 33.3433),
    "нікополь": (47.5725, 34.3953),
    "камʼянське": (48.5167, 34.6167),
    "кам'янське": (48.5167, 34.6167),
    "павлоград": (48.5333, 35.8667),
    "покров": (47.6500, 34.0833),
    "новомосковськ": (48.6167, 35.2333),
    "п'ятихатки": (48.4167, 33.7000),
    "синельникове": (48.3167, 35.5167),
    "вільногірськ": (48.5333, 34.0000),
    "марганець": (47.6333, 34.6333),
    "апостолове": (47.6667, 33.7167),
    "верхньодніпровськ": (48.6500, 34.3333),
    "жовті води": (48.3500, 33.5000),
    "зеленодольськ": (48.5000, 34.6833),
    "інгулець": (47.8167, 33.3333),
    "кривий ріг": (47.9086, 33.3433),
    "першотравенськ": (48.3500, 36.4000),
    "підгородне": (48.5833, 35.0833),
    "тернівка": (48.5167, 36.0833),
    },
    
    # === Запорізька область ===
    {
    "запоріжжя": (47.8388, 35.1396),
    "мелітополь": (46.8489, 35.3675),
    "бердянськ": (46.7556, 36.7914),
    "енергодар": (47.4989, 34.6575),
    "токмак": (47.2500, 35.7000),
    "пологи": (47.4833, 36.2500),
    "оріхів": (47.5667, 35.7833),
    "гуляйполе": (47.6500, 36.2667),
    "кам'янка-дніпровська": (47.4833, 34.4167),
    "василівка": (47.4333, 35.2500),
    "вільнянськ": (47.9500, 35.4167),
    "приморськ": (46.7333, 36.3500),
    "куйбишеве": (47.4667, 34.9667),
    },
    
    # === Київська область ===
    {
    "київ": (50.4501, 30.5234),
    "біла церква": (49.8006, 30.1139),
    "бровари": (50.5119, 30.7903),
    "бориспіль": (50.3547, 30.9558),
    "ірпінь": (50.5167, 30.2500),
    "буча": (50.5472, 30.2236),
    "фастів": (50.0833, 29.9167),
    "васильків": (50.1833, 30.3167),
    "вишневе": (50.3833, 30.3667),
    "обухів": (50.1000, 30.6167),
    "славутич": (51.5167, 30.7333),
    "переяслав": (50.0667, 31.4500),
    "яготин": (50.2667, 31.7667),
    "вишгород": (50.5833, 30.4833),
    "ржищів": (49.9667, 31.0333),
    "кагарлик": (49.8500, 30.8167),
    "тетіїв": (49.3667, 29.6667),
    "сквира": (49.7333, 29.6667),
    "тараща": (49.5500, 30.5000),
    "богуслав": (49.5500, 30.8667),
    "миронівка": (49.6500, 30.9667),
    "узин": (49.8333, 30.4333),
    },
    
    # === Харківська область ===
    {
    "харків": (49.9935, 36.2304),
    "лозова": (48.8833, 36.3167),
    "ізюм": (49.1833, 37.2500),
    "куп'янськ": (49.7167, 37.6167),
    "чугуїв": (49.8333, 36.6833),
    "мерефа": (49.8167, 36.0500),
    "балаклія": (49.4500, 36.8500),
    "дергачі": (50.1000, 36.1167),
    "люботин": (49.9500, 35.9333),
    "первомайський": (48.6333, 36.2167),
    "барвінкове": (48.9000, 37.0167),
    "богодухів": (50.1500, 35.5333),
    "валки": (49.8333, 35.6167),
    "вовчанськ": (50.2833, 36.9333),
    "красноград": (49.3667, 35.4500),
    "зміїв": (49.6833, 36.3500),
    "краснокутськ": (50.0500, 35.1500),
    "сахновщина": (49.1500, 35.8667),
    "близнюки": (48.9000, 35.5667),
    "великий бурлук": (49.8500, 37.3833),
    "зачепилівка": (49.1000, 35.4667),
    "кегичівка": (49.2833, 35.7667),
    "шевченкове": (49.7000, 36.9667),
    },
    
    # === Львівська область ===
    "львів": (49.8419, 24.0315),
    "дрогобич": (49.3500, 23.5000),
    "червоноград": (50.3833, 24.2333),
    "стрий": (49.2500, 23.8500),
    "борислав": (49.2833, 23.4167),
    "самбір": (49.5167, 23.2000),
    "трускавець": (49.2833, 23.5000),
    "золочів": (49.8000, 24.9000),
    "новояворівськ": (49.9333, 23.5833),
    "новий розділ": (49.4667, 24.1333),
    "сокаль": (50.4833, 24.2833),
    "яворів": (49.9500, 23.3833),
    "моршин": (49.1500, 23.8667),
    "городок": (49.7833, 23.6500),
    "буськ": (49.9667, 24.6333),
    "жидачів": (49.3833, 24.1333),
    "жовква": (50.0500, 23.9667),
    "мостиська": (49.8000, 23.1500),
    "перемишляни": (49.6667, 24.5500),
    "пустомити": (49.7167, 23.9333),
    "радехів": (50.2833, 24.6333),
    "сколе": (48.9333, 23.5167),
    "старий самбір": (49.4333, 23.0333),
    "турка": (49.1500, 23.0333),
    "угнів": (50.4167, 23.8167),
    
    # === Івано-Франківська область ===
    "івано-франківськ": (48.9226, 24.7111),
    "калуш": (49.0167, 24.3667),
    "коломия": (48.5333, 25.0333),
    "долина": (48.9833, 24.0000),
    "болехів": (49.0667, 23.8500),
    "бурштин": (49.2667, 24.6333),
    "галич": (49.1167, 24.7333),
    "надвірна": (48.6333, 24.5667),
    "яремче": (48.4500, 24.5500),
    "городенка": (48.6667, 25.5000),
    "косів": (48.3167, 25.1000),
    "рогатин": (49.4167, 24.6000),
    "снятин": (48.4500, 25.5667),
    "тисмениця": (48.9000, 24.8500),
    "тлумач": (48.8667, 25.0000),
    "верховина": (48.1500, 24.8000),
    "рожнятів": (48.9333, 24.1667),
    
    # === Тернопільська область ===
    "тернопіль": (49.5535, 25.5948),
    "чортків": (49.0167, 25.8000),
    "бережани": (49.4500, 24.9333),
    "борщів": (48.8000, 26.0500),
    "бучач": (49.0667, 25.3833),
    "заліщики": (48.6500, 25.7333),
    "збараж": (49.6667, 25.7833),
    "зборів": (49.6667, 25.1333),
    "копичинці": (49.1000, 25.9000),
    "кременець": (50.1000, 25.7333),
    "ланівці": (49.8500, 26.1000),
    "монастириська": (49.0833, 25.1667),
    "підволочиськ": (49.5333, 26.1500),
    "підгайці": (49.2667, 25.1333),
    "почаїв": (50.0000, 25.5167),
    "скалат": (49.4333, 25.9667),
    "теребовля": (49.3000, 25.7000),
    "шумськ": (50.1167, 26.1167),
    
    # === Хмельницька область ===
    "хмельницький": (49.4230, 26.9871),
    "кам'янець-подільський": (48.6842, 26.5753),
    "шепетівка": (50.1833, 27.0667),
    "нетішин": (50.3333, 26.6333),
    "славута": (50.3000, 26.8667),
    "старокостянтинів": (49.7500, 27.2167),
    "полонне": (50.1167, 27.5167),
    "красилів": (49.6500, 26.9667),
    "городок": (49.1667, 26.5000),
    "волочиськ": (49.5333, 26.1667),
    "деражня": (49.2667, 26.7667),
    "дунаївці": (48.8833, 26.8500),
    "ізяслав": (50.1167, 26.8167),
    "летичів": (49.3833, 27.6333),
    
    # === Рівненська область ===
    "рівне": (50.6199, 26.2516),
    "вараш": (51.3500, 25.8500),
    "дубно": (50.4167, 25.7500),
    "здолбунів": (50.5167, 26.2333),
    "костопіль": (50.8833, 26.4500),
    "острог": (50.3333, 26.5167),
    "радивилів": (50.1167, 25.2500),
    "сарни": (51.3333, 26.6000),
    "березне": (51.0500, 26.7500),
    "володимирець": (51.4167, 26.1500),
    "гоща": (50.5833, 26.6500),
    "демидівка": (50.6833, 26.5667),
    "дубровиця": (51.5667, 26.5667),
    "зарічне": (51.6167, 25.5167),
    "корець": (50.6167, 27.1500),
    "млинів": (50.5000, 26.6167),
    "рокитне": (51.2667, 27.2167),
    
    # === Волинська область ===
    "луцьк": (50.7593, 25.3424),
    "ковель": (51.2167, 24.7000),
    "нововолинськ": (50.7333, 24.1667),
    "володимир": (50.8500, 24.3167),
    "камінь-каширський": (51.6167, 24.9667),
    "ківерці": (50.8500, 25.4500),
    "любомль": (51.2333, 24.0333),
    "маневичі": (51.2833, 25.5500),
    "ратне": (51.6667, 24.5333),
    "рожище": (50.9333, 25.2833),
    "турійськ": (51.0500, 24.4833),
    "шацьк": (51.5000, 23.9333),
    "горохів": (50.5000, 24.7667),
    "іваничі": (50.9167, 24.6167),
    "локачі": (50.7500, 24.6500),
    "старовижівка": (51.5167, 24.2833),
    
    # === Житомирська область ===
    "житомир": (50.2547, 28.6587),
    "бердичів": (49.8833, 28.5833),
    "коростень": (50.9500, 28.6333),
    "новоград-волинський": (50.5833, 27.6167),
    "малин": (50.7667, 29.2333),
    "овруч": (51.3333, 28.8000),
    "коростишів": (50.3167, 29.0500),
    "радомишль": (50.5000, 29.2333),
    "попільня": (49.9333, 29.4667),
    "андрушівка": (50.0167, 28.9833),
    "баранівка": (50.2833, 27.6667),
    "ємільчине": (51.0500, 27.8000),
    "лугини": (51.0667, 28.3500),
    "народичі": (51.2000, 29.0833),
    "олевськ": (51.2333, 27.6500),
    "романів": (50.3500, 27.9833),
    "ружин": (49.7333, 29.2167),
    "червоноармійськ": (50.5833, 27.6333),
    "черняхів": (50.4500, 28.6833),
    "чуднів": (50.0500, 28.1000),
    
    # === Чернігівська область ===
    "чернігів": (51.4939, 31.2947),
    "ніжин": (51.0500, 31.8833),
    "прилуки": (50.6000, 32.4000),
    "бахмач": (51.1833, 32.8333),
    "бобровиця": (50.7500, 31.3833),
    "борзна": (51.2500, 32.4333),
    "варва": (50.6667, 32.7500),
    "городня": (51.8833, 31.6000),
    "ічня": (50.8500, 32.4000),
    "козелець": (51.0000, 31.1333),
    "коропʼ": (51.4500, 32.9500),
    "короп": (51.4500, 32.9500),
    "корюківка": (51.7667, 32.2500),
    "куликівка": (51.3333, 31.6833),
    "мена": (51.5167, 32.2000),
    "новгород-сіверський": (51.9833, 33.2667),
    "носівка": (50.9167, 31.6333),
    "ріпки": (51.8000, 31.0833),
    "семенівка": (52.1667, 32.5667),
    "сновськ": (51.8167, 31.9500),
    "сосниця": (51.5167, 32.4833),
    "срібне": (50.7333, 32.4667),
    "талалаївка": (50.7167, 33.3167),
    
    # === Сумська область ===
    "суми": (50.9077, 34.7981),
    "конотоп": (51.2333, 33.2000),
    "шостка": (51.8667, 33.4667),
    "охтирка": (50.3000, 34.8833),
    "ромни": (50.7500, 33.4667),
    "глухів": (51.6833, 33.9167),
    "кролевець": (51.5500, 33.3833),
    "лебедин": (50.5833, 34.4833),
    "путивль": (51.3333, 33.8667),
    "тростянець": (50.4833, 34.9667),
    "білопілля": (51.1500, 34.3167),
    "буринь": (51.2000, 34.0500),
    "велика писарівка": (50.4333, 35.2000),
    "липова долина": (50.2500, 33.8000),
    "середина-буда": (52.1833, 34.0167),
    "ямпіль": (51.9333, 33.7833),
    
    # === Закарпатська область ===
    "ужгород": (48.6208, 22.2879),
    "мукачево": (48.4500, 22.7167),
    "хуст": (48.1833, 23.3000),
    "берегове": (48.2000, 22.6500),
    "виноградів": (48.1500, 23.0333),
    "іршава": (48.3167, 23.0500),
    "перечин": (48.7333, 22.4667),
    "рахів": (48.0500, 24.2167),
    "свалява": (48.5500, 22.9833),
    "тячів": (48.0167, 23.5667),
    "чоп": (48.4333, 22.2000),
    "великий березний": (48.9000, 22.4667),
    "воловець": (48.7167, 23.1833),
    "міжгір'я": (48.5167, 23.5000),
    
    # === Чернівецька область ===
    "чернівці": (48.2919, 25.9358),
    "новодністровськ": (48.5833, 27.5500),
    "сторожинець": (48.1500, 25.7167),
    "вижниця": (48.2500, 25.2000),
    "герца": (48.1500, 26.2667),
    "глибока": (48.0833, 25.8833),
    "заставна": (48.5167, 25.8333),
    "кельменці": (48.4667, 26.8500),
    "кіцмань": (48.4333, 25.6333),
    "новоселиця": (48.2167, 26.2667),
    "путила": (48.0333, 24.9333),
    "сокиряни": (48.4500, 27.4167),
    "хотин": (48.5000, 26.5000),
    
    # === Common villages and small settlements ===
    # Add more as needed based on geocoding failures
    "великі дмитровичі": (49.5000, 29.1167),
    "малі дмитровичі": (49.4833, 29.1333),
    "кути": (48.3500, 25.2833),
    "старий кут": (48.3333, 25.2667),
    "новий кут": (48.3500, 25.3000),
    "красилівка": (50.1667, 29.5833),
    "калинівка": (49.4500, 28.5167),
    "підвисоке": (48.8667, 30.7667),
    "зеленьків": (48.5167, 32.2000),
    "компаніївка": (48.2667, 32.2167),
]

# Alternative names / spelling variations
SETTLEMENT_ALIASES = {
    "дніпропетровськ": "дніпро",
    "dnipropetrovsk": "дніпро",
    "dnipro": "дніпро",
    "kyiv": "київ",
    "kiev": "київ",
    "kharkiv": "харків",
    "odessa": "одеса",
    "odesa": "одеса",
    "lviv": "львів",
    "zaporizhia": "запоріжжя",
    "zaporizhzhya": "запоріжжя",
    "mykolaiv": "миколаїв",
    "nikolaev": "миколаїв",
    "poltava": "полтава",
    "kamyanske": "камʼянське",
}


def normalize_settlement_name(name):
    """Normalize a settlement name for lookup."""
    import re
    
    # Convert to lowercase
    name = name.lower().strip()
    
    # Remove common prefixes
    prefixes = [
        r'^с\.\s*',
        r'^село\s+',
        r'^смт\.?\s*',
        r'^м\.\s*',
        r'^місто\s+',
        r'^селище\s+',
        r'^хутір\s+',
    ]
    
    for prefix in prefixes:
        name = re.sub(prefix, '', name, flags=re.IGNORECASE)
    
    # Check aliases
    if name in SETTLEMENT_ALIASES:
        name = SETTLEMENT_ALIASES[name]
    
    return name.strip()


def lookup_settlement(address):
    """
    Try to find coordinates for a Ukrainian settlement from manual mapping.
    
    Args:
        address: Full address string (will extract settlement name)
        
    Returns:
        dict with 'lat' and 'lng' keys, or None if not found
    """
    import re
    
    # Try to extract settlement name from address
    parts = address.split(',')
    
    for part in parts:
        part = part.strip()
        
        # Check if this part looks like a settlement name
        settlement_indicators = ['с.', 'село', 'смт', 'м.', 'місто', 'селище']
        
        is_settlement = any(indicator in part.lower() for indicator in settlement_indicators)
        
        if is_settlement or len(parts) <= 2:
            normalized = normalize_settlement_name(part)
            
            if normalized in UKRAINE_SETTLEMENTS:
                coords = UKRAINE_SETTLEMENTS[normalized]
                return {"lat": coords[0], "lng": coords[1]}
    
    # Try each part directly
    for part in parts:
        normalized = normalize_settlement_name(part.strip())
        if normalized in UKRAINE_SETTLEMENTS:
            coords = UKRAINE_SETTLEMENTS[normalized]
            return {"lat": coords[0], "lng": coords[1]}
    
    # Try the whole address as a single settlement name
    normalized = normalize_settlement_name(address)
    if normalized in UKRAINE_SETTLEMENTS:
        coords = UKRAINE_SETTLEMENTS[normalized]
        return {"lat": coords[0], "lng": coords[1]}
    
    return None


def get_all_settlements():
    """Get list of all settlement names in the mapping."""
    return list(UKRAINE_SETTLEMENTS.keys())


def add_settlement(name, lat, lng):
    """
    Add a new settlement to the mapping (in memory only).
    To persist, add to UKRAINE_SETTLEMENTS dict above.
    """
    normalized = normalize_settlement_name(name)
    UKRAINE_SETTLEMENTS[normalized] = (lat, lng)
